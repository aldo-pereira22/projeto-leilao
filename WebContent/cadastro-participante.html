<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> Cadastro de participante</title>
</head>
<body>

	<h1> CADASTRO DE PARTICIPANTES </h1>
<form action="participante" id="form" method="post">
		<p>
			<label> Nome:  </label>
			<input type="text" id="input-nome" name="input-nome"
				size="30" />
		</p>
		<p>
			<label> CPF:  </label>
			<input type="text" id="input-cpf" name="input-cpf" size="40" />
		</p>
		<p>
			<label> Data de Nascimento  </label>
			<input type="text" id="input-data-nascimento" name="input-data-nascimento" size="40" />
		</p>
		<p>
			<input type="submit" id="btn-salva" name="btn-salva" value="salvar" />
		</p>
	</form>

</body>
<script type="text/javascript">
	const searchParams = new URLSearchParams(location.search);
	
	if(searchParams.get('cpf')){
		
		var ajax = new XMLHttpRequest();
		ajax.onreadystatechange = function(){
			if(this.readyState == 4 && this.status == 200){
				var participante = JSON.parse(ajax.responseText);
				carregarParticipanteNosCampos(participante);
			}
		};
		ajax.open("GET", "participante?cpf=" + searchParams.get('cpf') 
				+ "&origem=cadastro-participante", true);
		ajax.send();				
	}
	
	function carregarParticipanteNosCampos(participante){
		inputNome = document.querySelector('#input-nome');
		inputCpf = document.querySelector('#input-cpf');
		inputDataNascimento = document.querySelector('#input-data-nascimento');
		
		inputNome.value = participante.nome;
		inputCpf.value = participante.cpf;
		inputDataNascimento.value = participante.dataNascimento;
	}
</script>
</html>